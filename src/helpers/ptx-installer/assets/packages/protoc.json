{
  "apiVersion": "v1",
  "kind": "Package",
  "metadata": {
    "name": "protoc",
    "displayName": "Protocol Buffers Compiler",
    "description": "Protocol Buffers compiler for generating code from .proto files",
    "category": "development/tools",
    "homepage": "https://developers.google.com/protocol-buffers",
    "documentation": "https://developers.google.com/protocol-buffers/docs",
    "license": "BSD-3-Clause",
    "maintainer": "Google"
  },
  "spec": {
    "hasVariants": true,
    "platforms": {
      "windows": {
        "type": "zip",
        "variants": {
          "latest": {
            "version": "25.1",
            "urls": {
              "x64": "https://github.com/protocolbuffers/protobuf/releases/download/v25.1/protoc-25.1-win64.zip",
              "x86": "https://github.com/protocolbuffers/protobuf/releases/download/v25.1/protoc-25.1-win32.zip"
            },
            "extractTo": "C:/Program Files/protoc",
            "postInstall": [
              "setx PATH \"%PATH%;C:\\Program Files\\protoc\\bin\" /m"
            ]
          }
        },
        "verification": {
          "command": "protoc --version",
          "expectedExitCode": 0
        }
      },
      "linux": {
        "type": "zip",
        "variants": {
          "latest": {
            "version": "25.1",
            "urls": {
              "x64": "https://github.com/protocolbuffers/protobuf/releases/download/v25.1/protoc-25.1-linux-x86_64.zip",
              "arm64": "https://github.com/protocolbuffers/protobuf/releases/download/v25.1/protoc-25.1-linux-aarch_64.zip"
            },
            "extractTo": "/usr/local",
            "postInstall": [
              "sudo chmod +x /usr/local/bin/protoc"
            ]
          },
          "apt": {
            "version": "latest",
            "packages": ["protobuf-compiler"]
          }
        },
        "verification": {
          "command": "protoc --version",
          "expectedExitCode": 0
        }
      }
    },
    "sources": {
      "github": {
        "type": "github",
        "url": "https://github.com/protocolbuffers/protobuf",
        "apiEndpoint": "https://api.github.com/repos/protocolbuffers/protobuf/releases/latest",
        "pattern": "protoc-{version}-{os}-{arch}"
      }
    },
    "aiPrompts": {
      "versionDiscovery": "Check GitHub API for Protocol Buffers releases at https://api.github.com/repos/protocolbuffers/protobuf/releases/latest. Parse version tag and verify protoc compiler binaries for multiple platforms.",
      "urlResolution": "protoc-{version}-{os}-{arch}.zip where os=win64/win32/linux/osx, arch=x86_64/aarch_64",
      "updateGuidance": "Monitor Protocol Buffers releases for new versions. Protobuf follows semantic versioning. Verify binary compatibility and language binding support."
    },
    "dependencies": [],
    "templates": ["zip-archive"]
  }
}