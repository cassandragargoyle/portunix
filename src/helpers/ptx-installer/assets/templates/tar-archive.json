{
  "apiVersion": "v1",
  "kind": "PackageTemplate",
  "metadata": {
    "name": "tar-archive",
    "displayName": "TAR Archive Template",
    "description": "Template for Linux tar.gz archive packages",
    "category": "installer-templates",
    "version": "1.0.0"
  },
  "spec": {
    "targetPlatform": "linux",
    "installerType": "tar.gz",
    "defaultStructure": {
      "platforms": {
        "linux": {
          "type": "tar.gz",
          "variants": {
            "latest": {
              "version": "{{VERSION}}",
              "urls": {
                "x64": "{{DOWNLOAD_URL_X64}}",
                "arm64": "{{DOWNLOAD_URL_ARM64}}"
              },
              "extractTo": "{{EXTRACT_PATH}}",
              "postInstall": [
                "{{POST_INSTALL_COMMANDS}}"
              ]
            }
          },
          "verification": {
            "command": "{{VERIFICATION_COMMAND}}",
            "expectedExitCode": 0
          },
          "environment": {
            "{{ENV_VAR_NAME}}": "${extract_to}",
            "PATH_APPEND": "${extract_to}/bin"
          }
        }
      }
    },
    "requiredVariables": [
      {
        "name": "VERSION",
        "description": "Version number of the software",
        "example": "1.2.3"
      },
      {
        "name": "DOWNLOAD_URL_X64",
        "description": "Download URL for x64 archive",
        "example": "https://example.com/software-linux-x64.tar.gz"
      },
      {
        "name": "DOWNLOAD_URL_ARM64",
        "description": "Download URL for ARM64 archive",
        "example": "https://example.com/software-linux-arm64.tar.gz"
      },
      {
        "name": "EXTRACT_PATH",
        "description": "Path where to extract the archive",
        "example": "/opt/software"
      },
      {
        "name": "POST_INSTALL_COMMANDS",
        "description": "Commands to run after extraction",
        "example": "sudo ln -sf /opt/software/bin/software /usr/local/bin/software"
      },
      {
        "name": "VERIFICATION_COMMAND",
        "description": "Command to verify installation",
        "example": "software --version"
      },
      {
        "name": "ENV_VAR_NAME",
        "description": "Environment variable name to set",
        "example": "SOFTWARE_HOME"
      }
    ],
    "commonPatterns": {
      "systemInstall": {
        "extractPath": "/opt/{{PRODUCT_NAME}}",
        "postInstall": [
          "sudo ln -sf ${extract_to}/bin/{{BINARY_NAME}} /usr/local/bin/{{BINARY_NAME}}",
          "sudo chmod +x ${extract_to}/bin/{{BINARY_NAME}}"
        ]
      },
      "javaLikeInstall": {
        "extractPath": "/opt/java/{{PRODUCT_NAME}}",
        "postInstall": [
          "sudo update-alternatives --install /usr/bin/java java ${extract_to}/bin/java 1",
          "sudo update-alternatives --install /usr/bin/javac javac ${extract_to}/bin/javac 1"
        ]
      },
      "goLikeInstall": {
        "extractPath": "/usr/local",
        "postInstall": [
          "sudo tar -C /usr/local -xzf ${downloaded_file}",
          "echo 'export PATH=$PATH:/usr/local/{{PRODUCT_NAME}}/bin' | sudo tee /etc/profile.d/{{PRODUCT_NAME}}.sh"
        ]
      }
    },
    "examples": [
      {
        "name": "Basic TAR.GZ Package",
        "description": "Simple tar.gz archive with system installation",
        "variables": {
          "VERSION": "1.0.0",
          "DOWNLOAD_URL_X64": "https://example.com/app-linux-x64.tar.gz",
          "DOWNLOAD_URL_ARM64": "https://example.com/app-linux-arm64.tar.gz",
          "EXTRACT_PATH": "/opt/exampleapp",
          "POST_INSTALL_COMMANDS": "sudo ln -sf /opt/exampleapp/bin/exampleapp /usr/local/bin/exampleapp",
          "VERIFICATION_COMMAND": "exampleapp --version",
          "ENV_VAR_NAME": "EXAMPLE_HOME"
        }
      }
    ]
  }
}