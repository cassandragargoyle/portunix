{
  "apiVersion": "v1",
  "kind": "Package",
  "metadata": {
    "name": "maven",
    "displayName": "Apache Maven",
    "description": "Build automation and project management tool for Java projects",
    "category": "development/build-tools",
    "homepage": "https://maven.apache.org/",
    "documentation": "https://maven.apache.org/guides/",
    "license": "Apache-2.0",
    "maintainer": "Apache Software Foundation"
  },
  "spec": {
    "hasVariants": true,
    "platforms": {
      "windows": {
        "type": "zip",
        "variants": {
          "3.9.9": {
            "version": "3.9.9",
            "urls": {
              "x64": "https://archive.apache.org/dist/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.zip"
            },
            "extractTo": "C:/Program Files/Apache/Maven",
            "postInstall": [
              "echo Maven extracted successfully"
            ]
          },
          "latest": {
            "version": "3.9.9",
            "urls": {
              "x64": "https://archive.apache.org/dist/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.zip"
            },
            "extractTo": "C:/Program Files/Apache/Maven",
            "postInstall": [
              "echo Maven extracted successfully"
            ]
          }
        },
        "verification": {
          "command": "mvn --version",
          "expectedExitCode": 0
        },
        "environment": {
          "M2_HOME": "${extract_to}/apache-maven-3.9.9",
          "MAVEN_HOME": "${extract_to}/apache-maven-3.9.9",
          "PATH_APPEND": "${extract_to}/apache-maven-3.9.9/bin"
        }
      },
      "linux": {
        "type": "tar.gz",
        "variants": {
          "3.9.9": {
            "version": "3.9.9",
            "urls": {
              "x64": "https://archive.apache.org/dist/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.tar.gz"
            },
            "extractTo": "/opt/maven",
            "postInstall": [
              "sudo mkdir -p /opt/maven",
              "sudo tar -C /opt/maven -xzf ${downloaded_file} --strip-components=1",
              "echo 'export M2_HOME=/opt/maven' | sudo tee /etc/profile.d/maven.sh",
              "echo 'export MAVEN_HOME=/opt/maven' | sudo tee -a /etc/profile.d/maven.sh",
              "echo 'export PATH=$PATH:/opt/maven/bin' | sudo tee -a /etc/profile.d/maven.sh",
              "sudo chmod +x /etc/profile.d/maven.sh"
            ]
          },
          "latest": {
            "version": "3.9.9",
            "urls": {
              "x64": "https://archive.apache.org/dist/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.tar.gz"
            },
            "extractTo": "/opt/maven",
            "postInstall": [
              "sudo mkdir -p /opt/maven",
              "sudo tar -C /opt/maven -xzf ${downloaded_file} --strip-components=1",
              "echo 'export M2_HOME=/opt/maven' | sudo tee /etc/profile.d/maven.sh",
              "echo 'export MAVEN_HOME=/opt/maven' | sudo tee -a /etc/profile.d/maven.sh",
              "echo 'export PATH=$PATH:/opt/maven/bin' | sudo tee -a /etc/profile.d/maven.sh",
              "sudo chmod +x /etc/profile.d/maven.sh"
            ]
          },
          "apt": {
            "version": "latest",
            "packages": [
              "maven"
            ],
            "postInstall": []
          }
        },
        "verification": {
          "command": "mvn --version",
          "expectedExitCode": 0
        },
        "environment": {
          "M2_HOME": "/opt/maven",
          "MAVEN_HOME": "/opt/maven",
          "PATH_APPEND": "/opt/maven/bin"
        }
      }
    },
    "sources": {
      "official": {
        "type": "direct",
        "url": "https://maven.apache.org/download.cgi",
        "apiEndpoint": "https://maven.apache.org/download.cgi",
        "pattern": "apache-maven-{version}-bin"
      }
    },
    "verification": {
      "checksumType": "sha512",
      "checksumUrl": "https://archive.apache.org/dist/maven/maven-3/"
    },
    "aiPrompts": {
      "versionDiscovery": "Check Apache Maven download page at https://maven.apache.org/download.cgi for latest version. Parse version numbers and verify download links for both binary ZIP (Windows) and tar.gz (Linux) formats.",
      "urlResolution": "For Windows: apache-maven-{version}-bin.zip. For Linux: apache-maven-{version}-bin.tar.gz",
      "updateGuidance": "Monitor Apache Maven releases for new versions. Maven follows semantic versioning. Verify installation paths and environment variables (M2_HOME, MAVEN_HOME, PATH) are correctly set."
    },
    "dependencies": ["java"],
    "templates": ["zip-archive", "tar-archive"]
  }
}