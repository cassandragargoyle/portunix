{
  "apiVersion": "v1",
  "kind": "Package",
  "metadata": {
    "name": "fider",
    "displayName": "Fider",
    "description": "Open-source product feedback tool for collecting and organizing customer feedback",
    "category": "development-tools/feedback",
    "homepage": "https://fider.io/",
    "documentation": "https://fider.io/docs",
    "license": "AGPL-3.0",
    "maintainer": "Fider Team"
  },
  "spec": {
    "type": "container",
    "hasVariants": false,
    "container": {
      "provider": "docker-compose",
      "projectName": "portunix-fider",
      "services": {
        "db": {
          "image": "postgres:15-alpine",
          "containerName": "portunix-fider-db",
          "environment": {
            "POSTGRES_DB": "fider",
            "POSTGRES_USER": "fider",
            "POSTGRES_PASSWORD": "${FIDER_DB_PASSWORD}"
          },
          "volumes": [
            "portunix-fider-db:/var/lib/postgresql/data"
          ],
          "healthcheck": {
            "test": ["CMD-SHELL", "pg_isready -U fider -d fider"],
            "interval": "10s",
            "timeout": "5s",
            "retries": 5
          },
          "restart": "unless-stopped"
        },
        "fider": {
          "image": "getfider/fider:stable",
          "containerName": "portunix-fider-app",
          "ports": ["3000:3000"],
          "environment": {
            "BASE_URL": "${FIDER_BASE_URL:-http://localhost:3000}",
            "DATABASE_URL": "postgres://fider:${FIDER_DB_PASSWORD}@db:5432/fider?sslmode=disable",
            "JWT_SECRET": "${FIDER_JWT_SECRET}",
            "EMAIL_NOREPLY": "${FIDER_EMAIL_NOREPLY:-noreply@localhost}",
            "EMAIL_SMTP_HOST": "${FIDER_SMTP_HOST:-}",
            "EMAIL_SMTP_PORT": "${FIDER_SMTP_PORT:-}",
            "EMAIL_SMTP_USERNAME": "${FIDER_SMTP_USER:-}",
            "EMAIL_SMTP_PASSWORD": "${FIDER_SMTP_PASS:-}"
          },
          "dependsOn": {
            "db": {
              "condition": "service_healthy"
            }
          },
          "restart": "unless-stopped"
        }
      },
      "volumes": {
        "portunix-fider-db": {}
      },
      "networks": {
        "default": {
          "name": "portunix-fider-network"
        }
      }
    },
    "defaults": {
      "FIDER_DB_PASSWORD": "auto-generate",
      "FIDER_JWT_SECRET": "auto-generate",
      "FIDER_BASE_URL": "http://localhost:3000"
    },
    "verification": {
      "type": "http",
      "url": "http://localhost:3000/api/v1/health",
      "expectedStatus": 200,
      "timeout": 60
    },
    "sources": {
      "dockerHub": {
        "type": "dockerhub",
        "url": "https://hub.docker.com/r/getfider/fider",
        "image": "getfider/fider"
      },
      "github": {
        "type": "github",
        "url": "https://github.com/getfider/fider"
      }
    },
    "aiPrompts": {
      "versionDiscovery": "Check Docker Hub for getfider/fider tags. Stable tag is recommended for production.",
      "updateGuidance": "Monitor Fider releases for new versions. Check compatibility with PostgreSQL version."
    },
    "dependencies": [],
    "templates": ["docker-compose"]
  }
}
