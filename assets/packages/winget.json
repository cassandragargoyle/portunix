{
  "apiVersion": "v1",
  "kind": "Package",
  "metadata": {
    "name": "winget",
    "displayName": "Windows Package Manager",
    "description": "Microsoft's official package manager for Windows - install and manage applications",
    "category": "system/package-managers",
    "homepage": "https://docs.microsoft.com/en-us/windows/package-manager/",
    "documentation": "https://docs.microsoft.com/en-us/windows/package-manager/winget/",
    "license": "MIT",
    "maintainer": "Microsoft"
  },
  "spec": {
    "hasVariants": true,
    "platforms": {
      "windows": {
        "type": "script",
        "variants": {
          "github": {
            "version": "latest",
            "installScript": "Write-Host 'Checking if winget is already installed...'; try { $wingetCheck = winget --version 2>$null; if ($wingetCheck) { Write-Host \"âœ“ Winget is already installed (version: $wingetCheck)\"; Write-Host 'No installation needed.'; exit 0 } } catch { Write-Host 'Winget not found, proceeding with installation...' }; Write-Host 'Downloading compatible winget from GitHub...'; $wingetUrl = 'https://github.com/microsoft/winget-cli/releases/download/v1.6.3482/Microsoft.DesktopAppInstaller_8wekyb3d8bbwe.msixbundle'; $tempFile = Join-Path $env:TEMP 'Microsoft.DesktopAppInstaller.msixbundle'; Invoke-WebRequest -Uri $wingetUrl -OutFile $tempFile; Add-AppxPackage $tempFile; Remove-Item $tempFile; Write-Host 'Installation completed!'",
            "postInstall": [
              "winget --info"
            ]
          },
          "register": {
            "version": "latest",
            "installScript": "Add-AppxPackage -RegisterByFamilyName -MainPackage Microsoft.DesktopAppInstaller_8wekyb3d8bbwe",
            "postInstall": [
              "winget --info"
            ]
          },
          "powershell-module": {
            "version": "latest",
            "installScript": "$progressPreference = 'silentlyContinue'; Write-Host 'Installing WinGet PowerShell module from PSGallery...'; Install-PackageProvider -Name NuGet -Force | Out-Null; Install-Module -Name Microsoft.WinGet.Client -Force -Repository PSGallery | Out-Null; Write-Host 'Using Repair-WinGetPackageManager cmdlet to bootstrap WinGet...'; Repair-WinGetPackageManager -AllUsers; Write-Host 'Done.'",
            "postInstall": [
              "winget --info"
            ]
          }
        },
        "verification": {
          "command": "winget --version",
          "expectedExitCode": 0
        }
      }
    },
    "sources": {
      "github": {
        "type": "github",
        "url": "https://github.com/microsoft/winget-cli",
        "apiEndpoint": "https://api.github.com/repos/microsoft/winget-cli/releases/latest",
        "pattern": "Microsoft.DesktopAppInstaller_{version}.msixbundle"
      }
    },
    "verification": {
      "checksumType": "sha256",
      "checksumUrl": "https://github.com/microsoft/winget-cli/releases/latest"
    },
    "aiPrompts": {
      "versionDiscovery": "Check GitHub API for WinGet CLI releases at https://api.github.com/repos/microsoft/winget-cli/releases/latest. Parse version tag and verify MSIX bundle packages are available.",
      "urlResolution": "Microsoft.DesktopAppInstaller_{version}.msixbundle from GitHub releases",
      "updateGuidance": "Monitor WinGet CLI releases for new versions. WinGet is also automatically updated through Microsoft Store. Verify MSIX package compatibility with Windows versions."
    },
    "dependencies": [],
    "templates": ["powershell-script"]
  }
}